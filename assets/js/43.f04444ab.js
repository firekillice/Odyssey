(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{582:function(s,e,a){s.exports=a.p+"assets/img/jenkins-slave-node-config-1.d986ff6f.png"},697:function(s,e,a){"use strict";a.r(e);var t=a(26),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jenkins"}},[s._v("#")]),s._v(" jenkins")]),s._v(" "),t("h3",{attrs:{id:"comand"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#comand"}},[s._v("#")]),s._v(" comand")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("docker run "),t("br"),s._v("\n-u root "),t("br"),s._v("\n--rm "),t("br"),s._v("\n-d "),t("br"),s._v("\n-p 8080:8080 "),t("br"),s._v("\n-p 50000:50000 "),t("br"),s._v("\n-v /data/cuser00/var/jekins:/var/jenkins_home "),t("br"),s._v("\n-v /data/cuser00/var/jekins/run/docker.sock:/var/run/docker.sock "),t("br"),s._v("\njenkinsci/blueocean")])]),s._v(" "),t("li",[t("p",[s._v("将数据与容器分离")])])]),s._v(" "),t("h3",{attrs:{id:"和宿主机通信"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#和宿主机通信"}},[s._v("#")]),s._v(" 和宿主机通信")]),s._v(" "),t("ul",[t("li",[s._v("ssh 方式")]),s._v(" "),t("li",[s._v("在容器内执行")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* 通信方式\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建目录\nmkdir ~/.ssh && cd ~/.ssh\n--生成密钥\nssh-keygen -t rsa\n-- 一直回车即可\n-- 生成私钥id_rsa，公钥id_rsa.pub\n-- 退出镜像\nexit\n``")]),s._v(" "),t("ul",[t("li",[s._v("将公钥拷贝到宿主机中的id_rsa.pub")]),s._v(" "),t("li",[s._v("将~/.ssh/known_hosts放入到/var/jenkins_home/.ssh/known_hosts中")]),s._v(" "),t("li",[s._v("配置节点 "),t("br"),s._v(" "),t("img",{attrs:{src:a(582),alt:"jenkins-slave-node-config-ssh"}})])]),s._v(" "),t("h3",{attrs:{id:"错误历程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#错误历程"}},[s._v("#")]),s._v(" 错误历程")]),s._v(" "),t("ul",[t("li",[s._v("-it错误")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker exec -it static_builder /bin/bash /static/run.sh hotfix_wb_docker_apply_v1\nthe input device is not a TTY\nBuild step 'Execute shell' marked build as failure\nFinished: FAILURE\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("时间不对")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("打开jenkins的【系统管理】---\x3e 【脚本命令行】，在命令框中输入一下命令【时间时区设为 亚洲上海】：\n\nSystem.setProperty('org.apache.commons.jelly.tags.fmt.timeZone', 'Asia/Shanghai')\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"快捷方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快捷方式"}},[s._v("#")]),s._v(" 快捷方式")]),s._v(" "),t("ul",[t("li",[s._v("http://39.107.141.206:8080/updateCenter/ 更新中心")]),s._v(" "),t("li",[s._v("http://39.107.141.206:8080/restart")]),s._v(" "),t("li",[s._v("http://39.107.141.206:8080/exit")])]),s._v(" "),t("h3",{attrs:{id:"插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[s._v("#")]),s._v(" 插件")]),s._v(" "),t("ul",[t("li",[s._v("https://cloud.tencent.com/developer/article/1644686")]),s._v(" "),t("li",[s._v("AnsiColor 输入格式化颜色")]),s._v(" "),t("li",[s._v("build user vars plugin 采集build人")]),s._v(" "),t("li",[s._v("description setter plugin 格式化构建历史，栗子:")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('本次构建由? <span style="font-size:10px;color:red;"> $BUILD_USER</span>发起<span style="font-size:10px;color:green;"> $BRANCH_NAME</span>构建\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("Git Parameter git分支选择")])])])}),[],!1,null,null,null);e.default=n.exports}}]);