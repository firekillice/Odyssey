<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>零距离接地气的解析B树 | 吹风的坚果</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.280e3266.css" as="style"><link rel="preload" href="/assets/js/app.a58d46cf.js" as="script"><link rel="preload" href="/assets/js/2.fe1eedfa.js" as="script"><link rel="preload" href="/assets/js/3.11390a21.js" as="script"><link rel="prefetch" href="/assets/js/10.cfd8ec07.js"><link rel="prefetch" href="/assets/js/11.bfaecfdb.js"><link rel="prefetch" href="/assets/js/12.3d5b7b8a.js"><link rel="prefetch" href="/assets/js/13.ba32c4a8.js"><link rel="prefetch" href="/assets/js/14.20c0ad27.js"><link rel="prefetch" href="/assets/js/15.dd93f4bb.js"><link rel="prefetch" href="/assets/js/16.357888f8.js"><link rel="prefetch" href="/assets/js/17.c18c107c.js"><link rel="prefetch" href="/assets/js/18.dd58a776.js"><link rel="prefetch" href="/assets/js/19.cd2f9a46.js"><link rel="prefetch" href="/assets/js/20.0a808641.js"><link rel="prefetch" href="/assets/js/21.66e28aad.js"><link rel="prefetch" href="/assets/js/22.f5987e31.js"><link rel="prefetch" href="/assets/js/23.10b4c64e.js"><link rel="prefetch" href="/assets/js/24.b400c0b1.js"><link rel="prefetch" href="/assets/js/25.5eae1d63.js"><link rel="prefetch" href="/assets/js/26.f2235e62.js"><link rel="prefetch" href="/assets/js/27.4d4233f6.js"><link rel="prefetch" href="/assets/js/28.d311b5aa.js"><link rel="prefetch" href="/assets/js/29.cb91b13f.js"><link rel="prefetch" href="/assets/js/4.748295fe.js"><link rel="prefetch" href="/assets/js/5.55b94567.js"><link rel="prefetch" href="/assets/js/6.2fd028ab.js"><link rel="prefetch" href="/assets/js/7.12865be8.js"><link rel="prefetch" href="/assets/js/8.70384bac.js"><link rel="prefetch" href="/assets/js/9.fbfaf7b4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.280e3266.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">吹风的坚果</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/protocol/" class="nav-link">
  协议
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  读书
</a></div><div class="nav-item"><a href="/insight/" class="nav-link">
  浅见
</a></div><div class="nav-item"><a href="/cncf/" class="nav-link">
  云原生
</a></div><div class="nav-item"><a href="/security/" class="nav-link">
  安全
</a></div><div class="nav-item"><a href="/alg/" class="nav-link router-link-active">
  算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/protocol/" class="nav-link">
  协议
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  读书
</a></div><div class="nav-item"><a href="/insight/" class="nav-link">
  浅见
</a></div><div class="nav-item"><a href="/cncf/" class="nav-link">
  云原生
</a></div><div class="nav-item"><a href="/security/" class="nav-link">
  安全
</a></div><div class="nav-item"><a href="/alg/" class="nav-link router-link-active">
  算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>算法与数据结构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/alg/recursion.html" class="sidebar-link">聊一下递归</a></li><li><a href="/alg/stack.html" class="sidebar-link">栈的几个应用场景</a></li><li><a href="/alg/b-tree.html" aria-current="page" class="active sidebar-link">零距离接地气的解析B树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_1-啥是b树" class="sidebar-link">1. 啥是B树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_1-1-两种节点成员" class="sidebar-link">1.1 两种节点成员</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_1-2-特点" class="sidebar-link">1.2 特点</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_1-3-直观分析" class="sidebar-link">1.3 直观分析</a></li></ul></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_2-种树" class="sidebar-link">2. 种树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_2-1-先插入几个节点" class="sidebar-link">2.1 先插入几个节点</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_2-2-不过了-分家" class="sidebar-link">2.2 不过了，分家</a></li></ul></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_3-查找、遍历" class="sidebar-link">3. 查找、遍历</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-删除" class="sidebar-link">4. 删除</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-1-直接干掉" class="sidebar-link">4.1 直接干掉</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-2-老大没了-谁来坐这个位置" class="sidebar-link">4.2 老大没了，谁来坐这个位置</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-3-兄弟-借我一个数据" class="sidebar-link">4.3 兄弟，借我一个数据</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-4-太穷了-搭伙过日子吧" class="sidebar-link">4.4 太穷了，搭伙过日子吧</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-5-地主家没有余量-我也得去借啊" class="sidebar-link">4.5 地主家没有余量，我也得去借啊</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-6-地主家也借不动了-也搭伙过日子吧" class="sidebar-link">4.6 地主家也借不动了，也搭伙过日子吧</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-5-一不小心惊动了根结点-天塌陷了-树降低了一层" class="sidebar-link">4.5 一不小心惊动了根结点,天塌陷了，树降低了一层</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_4-6-心得" class="sidebar-link">4.6 心得</a></li></ul></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#_5-总结" class="sidebar-link">5. 总结</a></li><li class="sidebar-sub-header"><a href="/alg/b-tree.html#引用" class="sidebar-link">引用</a></li></ul></li><li><a href="/alg/rb-tree.html" class="sidebar-link">1. BST (Binary Search Tree)</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="零距离接地气的解析b树"><a href="#零距离接地气的解析b树" class="header-anchor">#</a> 零距离接地气的解析B树</h1> <p>B树对大多数计算机从业的同学都不陌生，也大体能知道对应的思路与原理，但是如果真要徒手撸一个还是有很多细节需要考虑的，本文就尝试零距离地分析一下，然后使用简单的方式对其进行描述和解释。</p> <h2 id="_1-啥是b树"><a href="#_1-啥是b树" class="header-anchor">#</a> 1. 啥是B树</h2> <h3 id="_1-1-两种节点成员"><a href="#_1-1-两种节点成员" class="header-anchor">#</a> 1.1 两种节点成员</h3> <ul><li>内部节点: 存储了数据以及指向其子节点的指针</li> <li>叶子节点: 只存储数据</li></ul> <h3 id="_1-2-特点"><a href="#_1-2-特点" class="header-anchor">#</a> 1.2 特点</h3> <p>假设是一个<code>M</code>阶的B树, <code>M</code>表示这个树的每一个节点最多可以拥有的子节点个数。该树具备以下性质:</p> <ul><li>每个节点最多有<code>M</code>个子节点</li> <li>每个非叶子节点最少有M/2(向上取整)，比如9阶最少有个5个子节点</li> <li>如果根结点有子节点，则最少是2个，否则就是叶子节点</li> <li>在一个节点内的若干元素，需要保证有序，且元素与所对应的左右子节点也需要保持有序</li> <li>所有的叶子节点都在同一层</li></ul> <h3 id="_1-3-直观分析"><a href="#_1-3-直观分析" class="header-anchor">#</a> 1.3 直观分析</h3> <ul><li>节点和子节点之间呈现如下的关系 <img src="data:image/jpeg;base64,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" alt="btree-basic-node-and-child.jpg">，如果拥有<code>N</code>个元素，则会有<code>N+1</code>个子节点</li> <li><code>所有的叶子节点都在同一层</code>直接就决定了B树一定是平衡树</li> <li>M值越大，树越矮胖；M值越小，树越瘦高，实际应用的B树都比较胖</li> <li>数据的有序呈现如下的关系 <img src="/assets/img/btree-basic-order.5bf2f31a.jpg" alt="btree-basic-order">，数据是有序的，元素<code>N</code>的左侧节点的所有数据小于等于<code>N</code>，右侧的节点所有数据大于等于<code>N</code></li> <li>列出了B树阶数限制的对比表，这些数据在数的分裂与合并中会不停地被用到。</li></ul> <table><thead><tr><th>B树阶数 (m)</th> <th>节点中最多子节点数</th> <th>节点中最少子节点数（非根）</th> <th>节点中最多数据个数</th> <th>节点中最少数据个数（非根）</th> <th>根节点最少子节点数（非叶）</th></tr></thead> <tbody><tr><td>3</td> <td>3</td> <td>2</td> <td>2</td> <td>1</td> <td>2</td></tr> <tr><td>4</td> <td>4</td> <td>2</td> <td>3</td> <td>1</td> <td>2</td></tr> <tr><td>5</td> <td>5</td> <td>3</td> <td>4</td> <td>2</td> <td>2</td></tr> <tr><td>6</td> <td>6</td> <td>3</td> <td>5</td> <td>2</td> <td>2</td></tr> <tr><td>7</td> <td>7</td> <td>4</td> <td>6</td> <td>3</td> <td>2</td></tr> <tr><td>8</td> <td>8</td> <td>4</td> <td>7</td> <td>3</td> <td>2</td></tr> <tr><td>9</td> <td>9</td> <td>5</td> <td>8</td> <td>4</td> <td>2</td></tr></tbody></table> <h2 id="_2-种树"><a href="#_2-种树" class="header-anchor">#</a> 2. 种树</h2> <p>我们以M为6的B树为例子，相对比较简单，容易理解，插入的数据序列为[5, 10，30，35，3, 8, 15, 110，20，102，46，91，80，18, 25, 36, 48, 69, 73, 78]</p> <h3 id="_2-1-先插入几个节点"><a href="#_2-1-先插入几个节点" class="header-anchor">#</a> 2.1 先插入几个节点</h3> <ul><li>依次插入5、10、30、35、3，过程如下 <img src="/assets/img/btree-insert-leaf-element.0155d638.jpg" alt="btree-insert-leaf-element">，数据保持为一个有序的数列</li> <li>插入5个值后，此时已达到6阶B树的最大数据个数5，怎么办呢</li></ul> <h3 id="_2-2-不过了-分家"><a href="#_2-2-不过了-分家" class="header-anchor">#</a> 2.2 不过了，分家</h3> <h4 id="叶子节点分家"><a href="#叶子节点分家" class="header-anchor">#</a> 叶子节点分家</h4> <ul><li>谁当爹呢？ 如果是奇数个数据，中间值是爹，如果是偶数个数据，中间两个任选一个都可以。于是上面形成的满节点变为如下形状，数值<code>10</code>喜当爹<br> <img src="data:image/jpeg;base64,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" alt="btree-split.jpg">，右节点的值都比10大，左节点的值都比10小</li></ul> <h4 id="叶子结点再分"><a href="#叶子结点再分" class="header-anchor">#</a> 叶子结点再分</h4> <ul><li>我们再依次插入一些值，直到右节点满5个数据，这个时候再次发生分裂，这次分裂将选出的父节点30放入10的后面，保持有序<br> <img src="/assets/img/tree-split-2.3e65b5c3.jpg" alt="btree-split-2.jpg"></li></ul> <h4 id="把老巢也拱了"><a href="#把老巢也拱了" class="header-anchor">#</a> 把老巢也拱了</h4> <ul><li>向上继续分: 我们再依次插入一些值，直到父节点满5个数据，这个时候父节点需要发生分裂，如下<br> <img src="/assets/img/btree-split-3.03033909.jpg" alt="btree-split-3.jpg"></li></ul> <h4 id="_2-3-一点心得"><a href="#_2-3-一点心得" class="header-anchor">#</a> 2.3 一点心得</h4> <ul><li>所有新插入的值都是在叶子节点发生的</li> <li>分家都是从叶子节点开始，有可能需要递归到根结点，逆流而上满了就分家。</li></ul> <h2 id="_3-查找、遍历"><a href="#_3-查找、遍历" class="header-anchor">#</a> 3. 查找、遍历</h2> <ul><li>查找比较简单，因为是有序树，基本原则就是按照顺序找就行了，当然如果节点中元素个数比较多，可以考虑使用二分查找加速，提供一个简单的暴力查找</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code> public int? Search(int Key)
 {
     var element = Elements.FirstOrDefault(x =&gt; x.Key == Key);
     if (element != null)
     {
         return element.Value;
     }
     else
     {
         for (var i = 0; i &lt; Children.Count; i++)
         {
             var value = Children[i].Search(Key);
             if (value != null)
             {
                 return value;
             }
         }
         return null;
     }
 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>遍历，因为是树，还是可以按照深度有序和广度优先的方式进行遍历，提供一个简单的递归遍历</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void Visit()
{
    //访问元素

    //访问子节点
    for (var i = 0; i &lt; Children.Count(); i++)
    {
        Children[i].Visit(level + 1);
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-删除"><a href="#_4-删除" class="header-anchor">#</a> 4. 删除</h2> <p>删除逻辑在B树的实现中略显复杂，我画了一个流程图在这里，红色标注的局部流程是一个循环，稍微复杂的逻辑在这个循环中。<br><img src="/assets/img/btree-delete-overview.bcfd4a5d.jpg" alt="btree-delete-overview">，我们按照这个图的思路依次展开。</p> <h3 id="_4-1-直接干掉"><a href="#_4-1-直接干掉" class="header-anchor">#</a> 4.1 直接干掉</h3> <ul><li>如果要删除的节点在叶子节点中，且叶子节点的<code>数据个数</code>大于<code>最少数据个数(本例中为2）</code>的时候，直接删除即可，比如下图中删除25，<br><img src="/assets/img/btree-delete-1.4add29e8.jpg" alt="delete-1">，如果删除后继续20则还是直接删除。</li></ul> <h3 id="_4-2-老大没了-谁来坐这个位置"><a href="#_4-2-老大没了-谁来坐这个位置" class="header-anchor">#</a> 4.2 老大没了，谁来坐这个位置</h3> <ul><li>如果删除非叶子节点，则需要<code>转为删除叶子节点的值</code>，如何处理呢？ 就是找到和该值最近的值，本文中使用<code>小于等于该值的最大值</code>的原则。</li> <li>下图删除10，则找到8，将8覆盖10的位置，然后触发8的删除<br> <img src="/assets/img/btree-delete-2.f8caf665.jpg" alt="delete-2">。</li> <li>这样就回到了4.1描述的情形，直接删除即可</li></ul> <h3 id="_4-3-兄弟-借我一个数据"><a href="#_4-3-兄弟-借我一个数据" class="header-anchor">#</a> 4.3 兄弟，借我一个数据</h3> <ul><li>下图如果删除了46，则会找到36来覆盖46的位置，然后触发将36的删除 <br> <img src="/assets/img/btree-delete-3.ed196db5.jpg" alt="delete-3">。</li> <li>36当老大后，只剩下35一个数据，数量不够格了，该节点就要想点子了，我得让自己保持健壮啊，于是左看看，又看看，看啥呢，看兄弟节点有没有多的，需要借一个</li> <li>这个时候它发现它的左兄弟节点刚好有3个，比最少2多了一个，得想办法搞过来，怎么要呢，并不是直接要，而是通过老大处理，<code>为了保持数据的有序</code>，实施<code>乾坤大挪移</code>,30到了原36的位置，20到30的位置，这样就重新够格了，并且保持了数据有序，噢耶<br> <img src="/assets/img/delete-3-adjust.44057c6b.jpg" alt="delete-3-adjust"></li> <li>假设此时左兄弟节点没有多余的数据，则就会看看右兄弟节点有没有空余的数据，看官们可以想想下图，如果删除3、5、或者8会发生什么呢<br><img src="/assets/img/btree-delete-right-neighbor-question.97fd00fb.jpg" alt="btree-delete-right-neighbor-question.jpg"></li> <li>如果反复发生借数据的事情，左邻右舍都被它搞惨了，它还要被删数据，这咋搞呢？请继续向下</li></ul> <h3 id="_4-4-太穷了-搭伙过日子吧"><a href="#_4-4-太穷了-搭伙过日子吧" class="header-anchor">#</a> 4.4 太穷了，搭伙过日子吧</h3> <ul><li>先看下图中的<code>[41,42]</code>所在的节点<br> <img src="/assets/img/btree-merge-1.06a34dd3.jpg" alt="btree-merge-1"><br>,他们之中任意一个数据删除，都没法兄弟之间帮忙，只能重新合并搭伙过日子，下面以删除41为例来说</li> <li>41被删除之后，只剩下42一个数据，太少了，于是左右看看发现都帮不上忙，于是把40拽了下来一块形成一个数目为4的序列，满足5阶的B树最大4个元素的约束,执行过程如下所示<br><img src="/assets/img/btree-merge-2.c168b7e2.jpg" alt="btree-merge-2.jpg"></li></ul> <h3 id="_4-5-地主家没有余量-我也得去借啊"><a href="#_4-5-地主家没有余量-我也得去借啊" class="header-anchor">#</a> 4.5 地主家没有余量，我也得去借啊</h3> <ul><li>比如下图所示，如果删了80,则91成了孤家寡人了<br><img src="/assets/img/btree-merge-3.1.f259c827.jpg" alt="btree-merge-3.1.jpg"></li> <li>咋办呢，它发现它的左节点有富裕啊，赶紧也借吧，此处的借数据稍微不同的是，需要将借的数据的子节点也需要借过来。<br> <img src="/assets/img/btree-merge-3.9bcf2831.jpg" alt="btree-merge-3"></li></ul> <h3 id="_4-6-地主家也借不动了-也搭伙过日子吧"><a href="#_4-6-地主家也借不动了-也搭伙过日子吧" class="header-anchor">#</a> 4.6 地主家也借不动了，也搭伙过日子吧</h3> <ul><li>比如下图所示，如果删了80,则91成了孤家寡人了<br><img src="/assets/img/btree-merge-3.2.06067956.jpg" alt="btree-merge-3.2.jpg"></li> <li>咋办呢，它发现隔壁老哥们也帮不上忙啊，也只能合并了 <br> <img src="/assets/img/btree-merge-3.3.e7abdd40.jpg" alt="btree-merge-3.3.jpg"></li></ul> <h3 id="_4-5-一不小心惊动了根结点-天塌陷了-树降低了一层"><a href="#_4-5-一不小心惊动了根结点-天塌陷了-树降低了一层" class="header-anchor">#</a> 4.5 一不小心惊动了根结点,天塌陷了，树降低了一层</h3> <ul><li>如果在向上回溯的时候，发现一直无法借数据，就会一直合并到根结点,如下图所示，删除了69之后触发了合并<br> <img src="/assets/img/btree-merge-4.3eb8db05.jpg" alt="btree-merge-4.jpg"></li> <li>此时46所在的节点找不到兄弟节点帮忙，只能和根结点合并，我们来看下如何处理<br> <img src="/assets/img/btree-merge-5.b581f447.jpg" alt="btree-merge-5.jpg"></li> <li>这个时候需要更新B树的根结点为合并后的节点</li> <li>整个树变低了一层</li></ul> <h3 id="_4-6-心得"><a href="#_4-6-心得" class="header-anchor">#</a> 4.6 心得</h3> <ul><li>在删除的时候，情况多少有点复杂，但是总体来看难点就是在<code>借节点和合并节点</code>上</li> <li><code>优先删除数据，删无可删则去借；借无可借则合并，合无可合就没数据了。</code></li> <li>借数据和合并数据需要向上递归，一直追溯到根节点</li></ul> <h2 id="_5-总结"><a href="#_5-总结" class="header-anchor">#</a> 5. 总结</h2> <ul><li>B树维护着一个有序的数列，不管是何种情形，都要有这根弦，所有的借数据、移动数据、合并数据都需要依照这个顺序进行的</li> <li>这个玩意理解了实现起来还是不难的，如果需要写好的例子可以在评论区留言。</li> <li>如果对文中的描述和插图有疑问或者错误的地方，也欢迎指出和评论。</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>微信公众号为&quot;吹风的坚果&quot;，欢迎关注，定期更新优质的计算机文章。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="引用"><a href="#引用" class="header-anchor">#</a> 引用</h2> <ul><li><a href="https://www.cs.usfca.edu/~galles/visualization/BTree.html" target="_blank" rel="noopener noreferrer">visualization<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh.wikipedia.org/wiki/B%E6%A0%91" target="_blank" rel="noopener noreferrer">wiki<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/alg/stack.html" class="prev">
        栈的几个应用场景
      </a></span> <span class="next"><a href="/alg/rb-tree.html">
        1. BST (Binary Search Tree)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a58d46cf.js" defer></script><script src="/assets/js/2.fe1eedfa.js" defer></script><script src="/assets/js/3.11390a21.js" defer></script>
  </body>
</html>
