## route

### 路由协议
* 动态路由，也就是动态维护路由表，而不是静态维护
* 为什么需要路由协议呢？

### 链路状态路由协议
* 距离为时延
* 每次更新只更新变化
* 使用Dijkstra算法
#### (OSPF)Open Shortest Path First
* 主要用在数据中心内部
* 等价路由的负载均衡
* OSPF路由器通过交换链路状态数据库（Link State Database）信息，可以了解整个网络的拓扑结构。**每个OSPF路由器都有完整的链路状态数据库**，并根据这些信息进行最短路径计算。

### IGP(Interior Gateway Protocol) 
* 内部网关协议或者说内网网关协议
* RIP、OSPF、IS-IS、IGRP

### EGP(Exterior Gateway Protocol)
* 外部网关协议
* BGP

### 距离矢量协议
#### RIP 
* Routing Information Protocol,路由信息协议
* 使用“跳数”(即metric)来衡量到达目标地址的路由距离
* 在实际使用中已经较少适用
* 若采用RIP协议，其网络内部所经过的链路数不能超过15，这使得RIP协议不适于大型网络。
* 距离就是通往目的站点所需经过的链路数，取值为0~16，数值16表示路径无限长
* RIP进程使用**UDP**的520端口来发送和接收RIP分组。
* 向邻居路由器发送**完整的路由表**
* 收敛较慢，即问题路由的后续处理比较慢
* **RIP协议本身并不提供完整的网络拓扑结构，它只了解到相邻路由器之间的连接和距离，无法了解整个网络的全貌。**

### (BGP) Border Gateway Protocol 
* eBGP，边界路由器之间使用
* iBGP，内部网络使用; 通过iBGP内部的路由器可以找到到**达外网目的地的最好的边界路由器**


### 边界路由器
* 边界路由器（Border Router）是一种网络设备，位于不同网络之间的边界处，负责在不同网络之间进行数据包的转发和路由选择
  
  
### 理解
* 本质上讲是将数据使用最优路径传递到目的地
* 而整个计算机网络是个图
* 路由是将网络进一步的切分，互联也就是切分
* 不能使用交换机路由的模式，因为广播量太大了


### 模拟器
* [模拟器](https://netsim.erinn.io/)

### router
* 决定了某个数据包从哪个接口(网卡)流出去
* ip route list
* netstat -rn
* route -n

### 数据包的修改方式
* NAT 
* OVERLAY
* 修改MAC地址

### 数据包在流转的处理方式
* 被修改
* 被转发