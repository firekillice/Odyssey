# 缓冲
## 缓冲类型

| 类型  | 应用场景                                          |
|-----|-----------------------------------------------|
| 全缓冲 | 块设备(磁盘文件)通常是全缓冲的。                                  |
| 行缓冲 | 标准输入stdin和标准输出stdout默认都是行缓冲的                  |
| 无缓冲 | 标准出错stderr是无缓冲的，这样保证错误提示和输出能够及时反馈给用户，供用户排除错误; 字符设备是一次存取一个字符的设备，不设置缓冲区 |
|     |                                               |


## 设备缓冲
* 块设备一般都有缓存，而字符设备一般都没有缓存。
* 块设备的刷出条件:
```
程序遇到“\n”，或是EOF (但对于磁盘这个块设备来说，“\n”并不会引起缓冲区刷出的动作，那是全缓冲，你可以使用setvbuf来设置缓冲区大小，或是用fflush刷缓存。)
缓中区满
文件描述符关闭
主动flush
程序退出
```
* 标准输出是行缓冲