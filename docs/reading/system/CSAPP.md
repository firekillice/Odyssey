## 深入理解计算机系统
### 前言
* 硬件结构 ![image](./assets/20200902155349.png)
* 总线的长度，即WORD的宽度，这个相当于是一个计算机内部的一个交通标准，4个字节，8个字节，相当于是四车道还是八车道
* 主印刷电路板简称主板
* IO设备都是通过控制器或者适配器与IO总线相连，相当于村庄与公路相连一样
* 寄存器文件就是寄存器堆CPU中多个寄存器组成的阵列
* ALU 计算逻辑器的计算过程：![image](./assets/20200902183405.png) ![image](./assets/20200902184744.png) 
* 简单处理过程：![image](./assets/20200902184844.png)
* DMA：不使用中断直接拷贝数据;在实现DMA传输时，是由DMA控制器直接掌管总线，因此，存在着一个总线控制权转移问题；相当于DMA临时获取了交通使用权。
* 体系架构设计的一个主要目标就是将数据复制工作加速，由于数据的可复制性，所有让缓存成为一种可能，而不像现实中的高速路设置。
* 存储体系 ![image](./assets/20200902201219.png)，主要思想就是上一层是下一个层的高速缓存，比如内存是硬盘的高速缓存，L1是L2的高速缓存，L3是主存的高速缓存。
* 操作系统作为硬件和程序（人类意志）的中间层，是作为使用计算资源而进行处理的中间层，本质上是为了调度各种硬件资源，比如进程是为了控制CPU或者是对CPU的抽象，文件是对IO设备的抽象，虚拟存储器是对磁盘IO设备和主存的抽象。
* 文件就是字节序列而已。每个IO设备，包括磁盘、键盘、显示器、网络等都可以抽象为文件。就是所有的输出与输入都可以抽象为文件。
* 虚拟存储器的作用：(1)作为磁盘的高速缓存 (2) 将内容存储到磁盘上
* 超线程： 可以让一个CPU同时执行两个控制流，因为ALU是一个，但是寄存器文件和PC是多个，可以在一个tick中决定执行哪个控制流。(超线程的概念打破了一个CPU同时只能执行一个线程的认知)，其实是一种快速的线程切换
* L3被加入到CPU Die中，它在逻辑上是共享模式。而L2则被每个Core单独占据。这时L2也常被指做MLC（Middle Level Cache），而L3也被叫做LLC（Last Level Cache）![image](./assets/20200903102008.png)
* 并发技术：多进程、多线程、超线程
* 并行技术： 多核，指令级并行(同时处理多条指令)，单指令多数据并行(SIMD, single instruction multi data)
### 信息的表示与处理
* 通过'位'的组合，加上合适的解释，就能表示有限集合的元素
* 最小寻址单元为byte
* 位向量
```
a=[01101001]表示{0，3，5，6}
b=[01010101]表示{0，2，4，6}
最终a&b={01000001}={0，6}
```
* 0x0f39d3  345197u
* 尽量减少无符号整数的使用，避免不必要的麻烦。java就不支持无符号整数，并且不支持long long
* 位向量与坐标系 ![image](./assets/20200904103953.png)
* 无符号整数的溢出是模运算，有符号整数的溢出可能是变为负数，这个都是因为计算的有限性引起的
* 有符号整数的二进制计算基于![image](./assets/20200904105644.png)，无符号整数的运算基于![image](./assets/20200904105756.png)
* 模数加法形成一种数学结构，成为阿贝尔群，这是以丹麦数学家Niels Henrik Abel的名字命名的。它有一个单位元，并且每个元素有一个加法逆元。
* 在大多数机器上，乘法都是比较耗时的操作，需要10个或者更多的时钟周期进行计算，然而其他整数运算（加、减、位级运算、移位）都只需要一个时钟。因此编译器尝试使用一种优化，使用移位和加减法来代替乘法。![image](./assets/20200904121504.png)，大多数编译器只在少量移位、加法、减法就足够的时候才会使用这种优化。
* 在大多数机器上，除法比乘法都更慢，需要30个或者更多的时钟周期进行计算。对于除以2的幂的运算，我们可以使用右移进行优化。




### 边走变想
* 除了CPU，其他都是IO
* 漫游模式写书
* 计算加速技术： 多机器、多核、多进程、多线程、超线程、指令并行、单指令多数据并行；计算机发展的一个重要方向，怎样更快。
* 抽象的重要性，进程、文件、虚拟存储器，抽象的重要意义就是只要根据API，那么使用者无需担心结果的稳定性。![image](./assets/20200903103439.png)‘
* 虚拟机是对整个计算机资源的抽象
* 数据会溢出，是因为我们忽视了计算机只能表示有限集合
* 最小的计算单元是bit，最小的寻址单元为byte，最小的传输单元为word(对于人类的语言的一个最小单元)
* 虚拟存储器的空间就像房子的空间分配，有各种区域
* 无符号整数的所有运算都集中在一个模空间中，只要溢出就是求模；有符号整数是一个循环，比如以signed char为例子， - 128 - 1 => 127, 127 + 1 => -128，也是一种模的形式。
```
  signed char u = -123;
    signed char v = -5;
    signed char r = u +v;
    printf("%d", r );
---------------------------
127
```
* 计算机执行的整数运算实际是一种模运算形式，只不过在一个很大的空间中，日常感觉不到而已。就像蚂蚁生活在自己的洞中，看不到森林一样。

### 趣闻
* 大小端问题来自于《格列夫游记》中无法对从哪端（大端还是小端）打开一个半熟的鸡蛋达成一致 ![image](./assets/20200903122518.png)
* 布尔代数![image](./assets/20200903123219.png) ![image](./assets/20200903123341.png)

### 引用
* GNU
```
The recursive acronym of GNU "GNU's Not Unix!" was chosen because, while GNU's design is Unix-like, it differs from it by being free software.
The original Unix was closed-source, so all of the GNU code has been entirely rewritten and does not contain any of the original Unix code.
```
* GCC: GNU compiler collection， GNU编译套装
* 标量: 标量只有大小概念，没有方向的概念。通过一个具体的数值就能表达完整。比如：重量、温度、长度、提及、时间、热量等都数据标量。![image](./assets/2020-02-13-daxiao.png)
```
标量、向量、矩阵、张量的关系
这4个概念是维度不断上升的，我们用点线面体的概念来比喻解释会更加容易理解：
点——标量（scalar）
线——向量（vector）
面——矩阵（matrix）
体——张量（tensor）
![image](./assets/2020-02-13-4liang.png)
```
* 线性空间又叫向量空间，向量是线性空间中的一个元素
* 线性方程组、行列式、集合（应该是一种行列式）有神秘的关系，